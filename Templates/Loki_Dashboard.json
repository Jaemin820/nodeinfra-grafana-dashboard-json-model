{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"canDelete":true,"slug":"loki-dashboard","url":"/d/Nz6kKgtGjloki/loki-dashboard","expires":"0001-01-01T00:00:00Z","created":"2023-05-17T05:05:57Z","updated":"2023-12-19T06:45:01Z","updatedBy":"Anonymous","createdBy":"Anonymous","version":3,"hasAcl":false,"isFolder":false,"folderId":165,"folderUid":"hE1kQnY4z","folderTitle":"Templates","folderUrl":"/dashboards/f/hE1kQnY4z/templates","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":true,"canEdit":true,"canDelete":true}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"description":"Loki v2+ showcase using JSON NGINX access logs.","editable":true,"fiscalYearStartMonth":0,"gnetId":12559,"graphTooltip":0,"id":195,"links":[],"liveNow":false,"panels":[{"collapsed":false,"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":24,"panels":[],"targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"refId":"A"}],"title":"KPI's","type":"row"},{"datasource":{"type":"loki","uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"purple"}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":5,"x":0,"y":1},"hideTimeOverride":false,"id":4,"maxDataPoints":300,"options":{"colorMode":"background","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"value","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"type":"loki","uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"{chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"}","queryType":"range","refId":"A"}],"timeFrom":"24h","title":"Total requests  ","transformations":[],"type":"stat"},{"datasource":{"type":"loki","uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"rgba(110, 157, 228, 0.76)"},{"color":"rgba(73, 124, 202, 1)","value":20}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":7,"x":5,"y":1},"id":5,"maxDataPoints":20,"options":{"colorMode":"background","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"editorMode":"code","expr":"sum by (status) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  __error__=\"\" [$__interval]))","instant":false,"legendFormat":"HTTP Status: {{status}}","queryType":"range","range":true,"refId":"A"}],"title":"Requests per status code","transformations":[],"type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"rgba(110, 157, 228, 0.76)"},{"color":"rgba(73, 124, 202, 1)","value":20}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":7,"x":12,"y":1},"id":35,"maxDataPoints":20,"options":{"colorMode":"background","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum by (status) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  __error__=\"\" [$__interval]))","instant":false,"legendFormat":"HTTP Status: {{status}}","range":true,"refId":"A"}],"title":"Requests per status code","transformations":[],"type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"purple"}]}},"overrides":[]},"gridPos":{"h":4,"w":5,"x":0,"y":5},"id":22,"interval":"5m","options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["mean"],"fields":"","values":false},"text":{},"textMode":"value","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"count(sum by (remote_addr) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  __error__=\"\" [$__interval])))","instant":true,"legendFormat":"","range":false,"refId":"A"}],"timeFrom":"5m","title":"Realtime visitors ","transformations":[],"type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"#96D98D"},{"color":"#73BF69","value":5},{"color":"#56A64B","value":10}]}},"overrides":[]},"gridPos":{"h":11,"w":12,"x":0,"y":9},"id":14,"maxDataPoints":1,"options":{"basemap":{"config":{"server":"streets"},"name":"Layer 0","type":"esri-xyz"},"controls":{"mouseWheelZoom":false,"showAttribution":true,"showDebug":false,"showMeasure":false,"showScale":false,"showZoom":true},"layers":[{"config":{"color":{"fixed":"semi-dark-blue"},"fillOpacity":0.3,"shape":"circle","showLegend":true,"size":{"field":"Value","fixed":5,"max":50,"min":10}},"location":{"lookup":"Metric","mode":"lookup"},"name":"Layer 1","type":"markers"}],"tooltip":{"mode":"details"},"view":{"allLayers":true,"id":"zero","lat":0,"lon":0,"zoom":2}},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum by (geoip_country_code) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | geoip_country_code != \"\" | __error__=\"\" [$__interval]))","instant":false,"legendFormat":"{{geoip_country_code}}","range":true,"refId":"A"}],"title":"Requests per Country","transformations":[{"id":"seriesToRows","options":{}}],"type":"geomap"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-orange"}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":12,"y":9},"id":30,"maxDataPoints":1,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"bytes_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"}[$__interval])","instant":true,"legendFormat":"$label_value","range":false,"refId":"A"}],"title":"NGINX logs in bytes","type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"purple"}]},"unit":"decbytes"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":15,"y":9},"id":8,"maxDataPoints":1,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"value","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum by (host) (sum_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | unwrap body_bytes_sent |  __error__=\"\" [$__interval]))","instant":true,"legendFormat":"Bytes sent","range":false,"refId":"A"}],"title":"Total Bytes Sent","transformations":[],"type":"stat"},{"datasource":{"type":"prometheus","uid":"grafanacloud-prom"},"description":"","gridPos":{"h":4,"w":6,"x":18,"y":9},"id":34,"options":{"code":{"language":"plaintext","showLineNumbers":false,"showMiniMap":false},"content":"üìä Dashboard created by Ward Bekker (hope you like it!)\n\nüê¶ Follow me on [Twitter](https://twitter.com/wardbekker) \u0026 [LinkedIn](https://www.linkedin.com/in/wardbekker/) for  Grafana Loki updates \n\nüé• Check out my [Grafana Loki video's](https://www.youtube.com/playlist?list=PLDGkOdUX1UjqEzcxQrbROMy8DN7MZv_h4) on Youtube","mode":"markdown"},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"type":"prometheus","uid":"grafanacloud-prom"},"refId":"A"}],"transparent":true,"type":"text"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-orange"}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":12,"y":13},"id":31,"maxDataPoints":1,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["sum"],"fields":"","values":false},"text":{},"textMode":"auto","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"}[$__interval])","instant":true,"range":false,"refId":"A"}],"title":"# NGINX log lines","type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":1,"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"purple"},{"color":"red","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":15,"y":13},"hideTimeOverride":true,"id":19,"links":[],"maxDataPoints":1,"options":{"colorMode":"background","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["max"],"fields":"","values":false},"text":{},"textMode":"value","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum(count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | status \u003e= 500 |__error__=\"\"[$__interval])) / (sum(count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | __error__=\"\"[$__interval]))/ 100)","instant":false,"legendFormat":"","range":true,"refId":"A"}],"timeFrom":"1h","title":"% of 5xx requests ","type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"purple"}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":4,"w":6,"x":18,"y":13},"hideTimeOverride":true,"id":18,"interval":"10m","links":[],"maxDataPoints":1,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["last"],"fields":"","values":false},"text":{},"textMode":"value","wideLayout":true},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum(count_over_time(({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} |= \"Googlebot\")[$__interval])) / (sum(count_over_time(({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} != \"Googlebot\")[$__interval])) / 100)","instant":true,"legendFormat":"","range":false,"refId":"A"}],"timeFrom":"1h","title":"% of requests by Googlebot","type":"stat"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"continuous-BlPu"},"custom":{"align":"center","cellOptions":{"type":"auto"},"filterable":false,"inspect":false},"mappings":[{"options":{"CN":{"color":"transparent","index":4,"text":"üá®üá≥CN"},"DE":{"color":"transparent","index":2,"text":"üá©üá™DE"},"FR":{"color":"transparent","index":3,"text":"üá´üá∑FR"},"GB":{"color":"transparent","index":7,"text":"üá¨üáßGB"},"IN":{"color":"transparent","index":5,"text":"üáÆüá≥IN"},"IT":{"color":"transparent","index":6,"text":"üáÆüáπIT"},"NL":{"color":"transparent","index":1,"text":"üá≥üá±NL"},"US":{"color":"transparent","index":0,"text":"üá∫üá∏ US"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"transparent"}]}},"overrides":[]},"gridPos":{"h":11,"w":3,"x":12,"y":17},"hideTimeOverride":true,"id":32,"maxDataPoints":1,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":false,"sortBy":[{"desc":true,"displayName":"Requests"}]},"pluginVersion":"10.3.0-64167","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"topk(10, sum by (geoip_country_code) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | geoip_country_code != \"\" and  __error__=\"\" [$__interval])))","instant":true,"legendFormat":"{{remote_addr}}","range":false,"refId":"A"}],"timeFrom":"15m","title":"Top Countries","transformations":[{"id":"organize","options":{"excludeByName":{"Field":false,"Time":true,"Value #A":true},"indexByName":{"Time":0,"Value #A":3,"geoip_country_code":2,"remote_addr":1},"renameByName":{"Field":"IP Address","Total":"Requests","Value #A":"Requests","geoip_country_code":"Country","remote_addr":"IP Address "}}}],"type":"table"},{"datasource":{"type":"loki","uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","gridPos":{"h":11,"w":9,"x":15,"y":17},"id":11,"options":{"dedupStrategy":"signature","enableLogDetails":false,"prettifyLogMessage":false,"showCommonLabels":false,"showLabels":false,"showTime":false,"sortOrder":"Descending","wrapLogMessage":false},"targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"editorMode":"code","expr":"{chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | line_format \"{{.request_body}}, args: {{.args}}, msec : {{.msec}}, status : {{.status}}\" | json | line_format \"‚û°Ô∏è {{.msec}} | method : {{.method}} {{.status}} \\n {{.args}}\"","legendFormat":"","queryType":"range","refId":"A"}],"title":"Recent requests","type":"logs"},{"collapsed":false,"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"gridPos":{"h":1,"w":24,"x":0,"y":28},"id":26,"panels":[],"targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"refId":"A"}],"title":"Request statistics over time","type":"row"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":100,"gradientMode":"hue","hideFrom":{"graph":false,"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":1,"pointSize":5,"scaleDistribution":{"log":2,"type":"log"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"#EAB839","value":0.2},{"color":"red","value":0.3}]},"unit":"s"},"overrides":[{"matcher":{"id":"byName","options":"95th percentile"},"properties":[{"id":"color","value":{"fixedColor":"blue","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"max latency"},"properties":[{"id":"color","value":{"fixedColor":"super-light-blue","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"max latency"},"properties":[{"id":"custom.fillOpacity","value":30}]}]},"gridPos":{"h":9,"w":8,"x":0,"y":29},"id":16,"maxDataPoints":50,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"8.0.0-beta3","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"quantile_over_time(0.95,{chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | unwrap request_time |  __error__=\"\"  [$__interval]) by (host)","legendFormat":"95th percentile","refId":"C"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"max by (host) (max_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | unwrap request_time |  __error__=\"\"  [$__interval]))","legendFormat":"max latency","refId":"D"}],"title":"95th percentile of Request Time","type":"timeseries"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":39,"gradientMode":"hue","hideFrom":{"graph":false,"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":1,"pointSize":5,"scaleDistribution":{"log":2,"type":"log"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"decimals":0,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"short"},"overrides":[{"matcher":{"id":"byName","options":"HTTP Status 500"},"properties":[{"id":"color","value":{"fixedColor":"dark-orange","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"{statuscode=\"200\"} 200"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"{statuscode=\"404\"} 404"},"properties":[{"id":"color","value":{"fixedColor":"semi-dark-purple","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"{statuscode=\"500\"} 500"},"properties":[{"id":"color","value":{"fixedColor":"dark-red","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"HTTP Status 404"},"properties":[{"id":"color","value":{"fixedColor":"light-orange","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"HTTP Status 301"},"properties":[{"id":"color","value":{"fixedColor":"light-blue","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"HTTP Status 200"},"properties":[{"id":"color","value":{"fixedColor":"semi-dark-blue","mode":"fixed"}}]}]},"gridPos":{"h":9,"w":8,"x":8,"y":29},"id":2,"maxDataPoints":50,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"8.0.0-beta3","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum by (status) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  __error__=\"\" [$__interval]))","legendFormat":"HTTP Status {{status}}","refId":"A"}],"title":"HTTP status codes over time","transformations":[{"id":"filterFieldsByName","options":{"include":{"names":["Time","HTTP Status 200","HTTP Status 301","HTTP Status 304","HTTP Status 404","HTTP Status 406","HTTP Status 500"]}}}],"type":"timeseries"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":100,"gradientMode":"hue","hideFrom":{"graph":false,"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]},"unit":"decbytes"},"overrides":[{"matcher":{"id":"byName","options":"Bytes sent"},"properties":[{"id":"color","value":{"fixedColor":"light-blue","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"appfelstrudel"},"properties":[{"id":"color","value":{"fixedColor":"yellow","mode":"fixed"}}]}]},"gridPos":{"h":9,"w":8,"x":16,"y":29},"id":9,"maxDataPoints":50,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"8.0.0-beta3","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"sum by (host) (sum_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json | status=200 | unwrap body_bytes_sent |  __error__=\"\" [$__interval]))","legendFormat":"Bytes sent","refId":"A"}],"title":"Bytes Sent","transformations":[],"type":"timeseries"},{"collapsed":false,"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"gridPos":{"h":1,"w":24,"x":0,"y":38},"id":28,"panels":[],"targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"refId":"A"}],"title":"Acquisition and Behaviour","type":"row"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"filterable":false,"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"Requests"},"properties":[{"id":"custom.cellOptions","value":{"mode":"gradient","type":"gauge"}},{"id":"color","value":{"mode":"continuous-BlPu"}}]},{"matcher":{"id":"byName","options":"Requests"},"properties":[{"id":"custom.width","value":300}]}]},"gridPos":{"h":6,"w":9,"x":0,"y":39},"id":6,"maxDataPoints":1,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Requests"}]},"pluginVersion":"9.5.2-cloud.2.0cb5a501","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"topk(10, sum by (http_referer) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  http_referer != \"\" and http_referer !~ \".*?$host.*?\" and http_referer !~ \".*?\\\\*\\\\*\\\\*.*?\" | __error__=\"\" [15m])))","instant":true,"legendFormat":"{{http_referer}}","range":false,"refId":"A"}],"timeFrom":"15m","title":"Top 10 HTTP Referers","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{},"renameByName":{"Field":"Referer","Total":"Requests","Value #A":"Requests","http_referer":"HTTP Referrer"}}}],"type":"table"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"filterable":false,"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"Requests"},"properties":[{"id":"custom.width","value":300},{"id":"custom.cellOptions","value":{"mode":"gradient","type":"gauge"}},{"id":"color","value":{"mode":"continuous-BlPu"}}]}]},"gridPos":{"h":6,"w":15,"x":9,"y":39},"id":7,"maxDataPoints":1,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Requests"}]},"pluginVersion":"9.5.2-cloud.2.0cb5a501","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"topk(10, sum by (http_user_agent) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  __error__=\"\" [15m])))","instant":true,"legendFormat":"{{http_user_agent}}","range":false,"refId":"A"}],"timeFrom":"15m","title":"Top 10 User Agents","transformations":[{"id":"organize","options":{"excludeByName":{"Field":false,"Time":true},"indexByName":{},"renameByName":{"Field":"Agent","Total":"Requests","Value #A":"Requests","http_user_agent":"User agent"}}}],"type":"table"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"filterable":false,"inspect":false},"mappings":[{"options":{"NL":{"index":1,"text":"üá≥üá±"},"US":{"index":0,"text":"üá∫üá∏"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"Requests"},"properties":[{"id":"custom.width","value":300},{"id":"custom.cellOptions","value":{"mode":"gradient","type":"gauge"}},{"id":"color","value":{"mode":"continuous-BlPu"}}]},{"matcher":{"id":"byName","options":"Country"},"properties":[{"id":"custom.width","value":74}]}]},"gridPos":{"h":8,"w":9,"x":0,"y":45},"id":3,"maxDataPoints":1,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Requests"}]},"pluginVersion":"9.5.2-cloud.2.0cb5a501","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"topk(10, sum by (remote_addr, geoip_country_code) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} | json |  __error__=\"\" [15m])))","instant":true,"legendFormat":"{{remote_addr}}","range":false,"refId":"A"}],"timeFrom":"15m","title":"Top 10 visitor IPs","transformations":[{"id":"organize","options":{"excludeByName":{"Field":false,"Time":true},"indexByName":{"Time":0,"Value #A":3,"geoip_country_code":2,"remote_addr":1},"renameByName":{"Field":"IP Address","Total":"Requests","Value #A":"Requests","geoip_country_code":"Country","remote_addr":"IP Address "}}}],"type":"table"},{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"filterable":false,"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green"},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"Requests"},"properties":[{"id":"custom.width","value":300},{"id":"custom.cellOptions","value":{"mode":"gradient","type":"gauge"}},{"id":"color","value":{"mode":"continuous-BlPu"}}]}]},"gridPos":{"h":8,"w":15,"x":9,"y":45},"id":12,"maxDataPoints":1,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Requests"}]},"pluginVersion":"9.5.2-cloud.2.0cb5a501","targets":[{"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"expr":"topk(10, sum by (request_uri) (count_over_time({chain=~\"$chain\", network=~\"$network\", region=~\"$region\", job=~\"$job\", filename=~\"$filename\"} !~ `\\.ico|\\.svg|\\.css|\\.png|\\.txt|\\.js|\\.xml` | json | status = 200 and request_uri != \"/\" | __error__=\"\" [15m])))","instant":true,"legendFormat":"{{request_uri}}","range":false,"refId":"A"}],"timeFrom":"15m","title":"Top 10 Requested Pages","transformations":[{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{},"renameByName":{"Field":"Page","Time":"","Total":"","Value #A":"Requests","request_uri":"Path"}}}],"type":"table"}],"refresh":"","schemaVersion":39,"tags":["template"],"templating":{"list":[{"current":{"selected":false,"text":"SUI","value":"SUI"},"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"definition":"label_values(chain)","hide":0,"includeAll":false,"multi":false,"name":"chain","options":[],"query":"label_values(chain)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"mainnet","value":"mainnet"},"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"definition":"label_values({chain=~\"$chain\"},network)","hide":0,"includeAll":false,"multi":false,"name":"network","options":[],"query":"label_values({chain=~\"$chain\"},network)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"france","value":"france"},"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"definition":"label_values({chain=~\"$chain\", network=~\"$network\"}, region)","hide":0,"includeAll":false,"multi":false,"name":"region","options":[],"query":"label_values({chain=~\"$chain\", network=~\"$network\"}, region)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"ext-prod-SUI-mainnet-fullnode","value":"ext-prod-SUI-mainnet-fullnode"},"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"definition":"label_values({chain=~\"$chain\", network=~\"$network\", region=~\"$region\"}, job)","hide":0,"includeAll":false,"multi":false,"name":"job","options":[],"query":"label_values({chain=~\"$chain\", network=~\"$network\", region=~\"$region\"}, job)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"selected":false,"text":"/home/ubuntu/kong/log/access-proxy.log","value":"/home/ubuntu/kong/log/access-proxy.log"},"datasource":{"uid":"f782d7ea-f993-4f3a-917d-3e5539188746"},"definition":"label_values(filename)","hide":0,"includeAll":false,"multi":false,"name":"filename","options":[],"query":"label_values(filename)","refresh":1,"regex":"","skipUrlSync":false,"sort":1,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-1h","to":"now"},"timepicker":{"refresh_intervals":["10s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"","title":"Loki Dashboard","uid":"Nz6kKgtGjloki","version":3,"weekStart":""}}